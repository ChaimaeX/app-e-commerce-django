<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
   
<style>
 
 *{
margin:0;
padding:0;
}
body{
background-color: #222;
color:#fff;
font-size: system-ui;
display: flex;
justify-content: center;
align-items: center;
flex-direction: column;
max-width: 80%;
margin: auto;
}

.stock{

width: 100%;
margin: auto;
}
.head{
text-align: center;
text-transform: uppercase;
margin: 40px , 0;
padding: 30px;
}
input , textarea{
width: 100%;
/* height: 30px; */
outline: none;
border: none;
background-color: #111;
margin: 4px 0;
border-radius: 4px;
padding: 10px 4px;

color: #fff;
}
/* had focus fach ktochi l input ktbdal lon dyalha*/
input:focus{
background: #000;
transform: scale(1.1);
}
#prix.input{

display: flex;
justify-content: space-between;
}
#total{
background-color: red;
padding: 4px 2px;
border-radius: 4px;

}
#total::before{
content: 'Total: ';
}
button{
width: 100%;
height: 30px;
border: none;
border-radius: 10px;
cursor: pointer;
background: #551055;
transition: 0.5s;
color: #fff;
}
button:hover{
background: #c944ae;
letter-spacing: 2px;
}
.btnsearch{
display: flex;
justify-content: space-between;

}
.btnsearch button{
width: 45%;
}
table{
width: 100%;
text-align: center;
margin: 10px 0;
}
table th{
text-transform: uppercase;
}
th,td{
padding: 5px;
}
#deleteAll{
margin: 20px 0;
}
#telecharger{
margin: 20px 4px;
width: auto;
height: 30px;
border-radius: 10px;
text-align: center;
padding-top: 5px;
cursor: pointer;
background-color: red;
display: none;

}
a{
color: #fff;
text-decoration: none;
} 
a:hover{
color: var(#000);
}
   
</style>
<div class="container">
    <div class="stock">
       
        <div class="head">
            <h3>Modifier Produit</h3>
        </div>
       
        <form id="productForm" method="post" enctype="multipart/form-data">
         {% csrf_token %}
          <div class="inputs">
        
           <input placeholder="Title" value="{{ product.name }}" required name="title" type="text" id="title">
            <div id="prix">
             <input class="price" onblur="getTotal()" value="{{ product.price }}" type="number" name="price" id="price"  placeholder="Price">
             <input type="number" name="remise" id="remise"  placeholder="Taux de Promotion Exemple 20%" value="{{ product.TauxRemise}}" >
             <input class="quantity" onblur="getTotal()" value="{{ product.quantity }}" type="number" name="qantite" id="quantity"  placeholder="Quantity">
             <input readonly value="{{ product.total }}" type="number" name="total" id="total"  placeholder="Total">
            </div>
            <div class="form-group">
                <label for="exampleFormControlFile1">Image</label>
                <input type="file" name="image" class="form-control-file" id="exampleFormControlFile1">
                <!-- {% if product.image %}
                    <img src="{{ product.image.url }}" alt="Product Image" style="max-width: 200px;">
                {% endif %} -->
            </div>
           <textarea  id="description" name="description" value="{{product.descreption}}" rows="4" cols="50" placeholder="Descreption">{{ product.descreption }}</textarea>
           <input type="text" value="{{ product.category }}" placeholder="Category" id="category" name="category">
           <!-- <div class="form-check">
             <input class="form-check-input" type="checkbox" value="{{ product.promo }}" id="flexCheckDefault" name="promo" {% if product.promo %} checked {% endif %}>
             <label class="form-check-label" for="flexCheckDefault">
              Rabais
             </label>
           </div> -->
           <br>
           <button type="submit">Update</button>
            <br><br>
        
     </form>
    </div>
 </div>
 <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
 <script>
    //  $(document).ready(function() {
    //      $('#productForm').submit(function(event) {
    //          // Add validation logic here if needed
    //          // e.g., check if price and quantity are valid numbers
    //          // and prevent form submission if they are not
    //      });
    //      $('#flexCheckDefault').change(function() {
    //          $('#new_price').prop('disabled', !this.checked);
    //          getTotal();
    //      });
    //  });
 
     function getTotal() {
         let total = 0;
         let price = parseFloat($('#price').val()) || 0;
         let quantity = parseFloat($('#quantity').val()) || 0;
        //  let newPrice = parseFloat($('#new_price').val()) || price;
 
        //  if ($('#flexCheckDefault').is(':checked')) {
        //      total = newPrice * quantity;
        //  } else {
             total = price * quantity;
        //  }
         
         $('#total').val(total);
     }
 </script>